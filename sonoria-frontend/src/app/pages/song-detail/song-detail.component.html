<div class="song-detail-layout">
    <div class="left-col scroll-col scroll-fade">
        <div class="top-row">
            <div class="cover-wrapper">
                <img [src]="song.coverUrl" alt="cover" class="cover" />
            </div>
            <div class="meta">
                <h1 class="title">{{ song.title }}</h1>
                <div class="artist big-text">{{ song.artist }}</div>
                <div class="uploader bigger-sub">Upload by {{ song.uploader }}</div>
                <div class="play-line">
                    <button mat-mini-fab color="primary" class="play-btn" (click)="playSong()"
                        [attr.aria-label]="isPlaying ? 'Pause' : 'Play'">
                        <mat-icon [fontIcon]="isPlaying ? 'pause' : 'play_arrow'"></mat-icon>
                    </button>
                </div>
            </div>
        </div>
        <div class="action-row">
            <button mat-stroked-button class="like-btn" (click)="toggleLike()" [class.active]="song.liked">
                <mat-icon [ngClass]="{'liked-heart': song.liked}" fontIcon="favorite"></mat-icon>
                <span>{{ song.liked ? 'Liked' : 'Like' }}</span>
            </button>
            <button mat-stroked-button class="download-btn" (click)="downloadSong()">
                <mat-icon fontIcon="download"></mat-icon>
                <span>Download</span>
            </button>
            <button mat-stroked-button class="share-btn" (click)="shareSong()">
                <mat-icon fontIcon="reply"></mat-icon>
                <span>Share</span>
            </button>
        </div>
        <div class="info-lines">
            <div class="info-line"><span class="label">Song</span><span class="value">{{ song.title }}</span></div>
            <div class="info-line"><span class="label">Album</span><span class="value">{{ song.album }}</span></div>
            <div class="info-line"><span class="label">Composer</span><span class="value">{{ song.composer }}</span>
            </div>
            <div class="info-line rating-line"><span class="label">Rating</span>
                <span class="stars" role="radiogroup" aria-label="Song rating">
                    <button type="button" *ngFor="let s of [1,2,3,4,5]" class="star-btn" (click)="setRating(s)"
                        role="radio" [attr.aria-checked]="s === song.rating" [attr.aria-label]="s + ' star'">
                        <mat-icon fontIcon="{{ s <= song.rating ? 'star' : 'star_border' }}"></mat-icon>
                    </button>
                </span>
            </div>
        </div>
        <div class="comments-section">
            <h2 class="comments-title">Comments</h2>
            <div class="comment" *ngFor="let c of comments">
                <img [src]="c.avatar" class="avatar" alt="avatar" />
                <div class="c-body">
                    <div class="c-meta">
                        <span class="c-user">{{ c.user }}</span>
                        <span class="c-time">{{ c.timeAgo }}</span>
                    </div>
                    <div class="c-text">{{ c.text }}</div>
                </div>
            </div>
        </div>
    </div>
    <div class="right-col scroll-col scroll-fade">
        <div class="lyrics-box">
            <h2 class="lyrics-title">Lyrics</h2>
            <pre class="lyrics">{{ song.lyrics }}</pre>
        </div>
    </div>
</div>