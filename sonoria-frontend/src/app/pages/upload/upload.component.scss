/* Full viewport layout (no outer scroll) */
html,
body,
:host {
	height: 100%;
}

:host {
	display: block;
}

/* Material-based new layout */
.upload-shell {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
	gap: 32px;
	align-items: stretch;
	width: 100%;
	padding: 40px 60px 50px 50px;
	height: 100%;
	box-sizing: border-box;
	overflow: hidden;
	/* chặn làm xuất hiện scroll ngoài */
}

.upload-card {
	background: #121412;
	color: #fff;
	display: flex;
	flex-direction: column;
	padding: 0;
	/* mat-card content will manage padding */
	position: relative;
	min-height: 0;
	/* để grid auto-fit */
	overflow: hidden;
	/* nội dung bên trong tự cuộn */
}

::ng-deep .upload-card.mat-mdc-card .mdc-card__content {
	padding: 0;
}

/* File drop area */
.file-card .drop-area {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	margin: 0;
	border: 2px dashed #2d2f2d;
	background: #181c18;
	border-radius: 16px;
	padding: 40px 24px;
	transition: border-color .25s, background .25s;
	position: relative;
	text-align: center;
	overflow: auto;
	/* nếu dài cuộn trong card */
}

.file-card .drop-area:hover {
	border-color: #2ecc40;
}

.file-card .drop-area.drag-over {
	border-color: #42e65b;
	background: #1c271c;
	box-shadow: 0 0 0 1px #264626, 0 0 14px -2px rgba(66,230,91,0.45);
}

/* Greener state when file selected */
.file-card .drop-area.filled {
	border-color: #33d64a;
	box-shadow: 0 0 0 1px #1e331e, 0 0 12px -2px rgba(46,204,64,0.35);
}

.file-card .drop-area.filled .cloud-icon {
	color: #42e65b;
}

.file-card .drop-area.filled .mp3-file-name {
	color: #42e65b;
}

.cloud-icon {
	font-size: 56px;
	height: 56px;
	width: 56px;
	color: #b3b3b3;
	opacity: .85;
}

.drop-text {
	font-size: 1.05rem;
	color: #c2c2c2;
	line-height: 1.4;
}

.mp3-file-name {
	color: #2ecc40;
	font-weight: 600;
	word-break: break-all;
}

.or-text {
	color: #888;
	font-size: .85rem;
}

.remove-audio-btn {
	position: absolute;
	top: 8px;
	right: 8px;
	backdrop-filter: blur(4px);
}

.mp3-error {
	color: #ff4d4f;
	font-size: .85rem;
	margin-top: 14px;
}

/* Form card */
.form-card {
	padding: 24px 32px 30px 32px;
	overflow: hidden;
}

/* Không cuộn trong form */
.material-form {
	display: flex;
	flex-direction: column;
	gap: 22px;
	flex: 1;
	overflow: hidden;
	padding: 5px;
}

.form-title {
	margin: 0 0 4px;
	font-size: 1.25rem;
	font-weight: 600;
}

.w-100 {
	width: 100%;
}

/* Reserve space for optional field (Other category) */
.optional-slot {
	min-height: 76px;
	display: flex;
	align-items: flex-start;
}

/* Image upload inside form */
.img-upload-box {
	width: 100%;
	aspect-ratio: 16/9;
	border: 2px dashed #2d2f2d;
	border-radius: 14px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: #181c18;
	cursor: pointer;
	position: relative;
	overflow: hidden;
	transition: border-color .25s, background .25s;
	margin-right: 2px;
}

.img-upload-box:hover {
	border-color: #2ecc40;
}

.img-upload-box.has-img {
	border-color: #2ecc40;
	background: #151815;
}

.img-upload-box.drag-over {
	border-color: #42e65b;
	background: #1e2f1e;
	box-shadow: 0 0 0 1px #264626, 0 0 10px -2px rgba(66,230,91,0.4);
}

.img-preview {
	width: 100%;
	height: 100%;
	object-fit: contain; /* hiển thị toàn bộ ảnh, không cắt */
	background: #0d0f0d; /* nền trung tính cho phần letterbox */
	display: block;
}

.remove-img-btn {
	position: absolute;
	top: 8px;
	right: 8px;
}

.img-placeholder {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 4px;
	color: #b3b3b3;
	font-size: .9rem;
}

.img-icon {
	font-size: 40px;
	width: 40px;
	height: 40px;
	color: #888;
}

.img-error {
	position: absolute;
	bottom: 6px;
	left: 10px;
	background: rgba(0,0,0,0.55);
	padding: 4px 8px;
	border-radius: 6px;
	font-size: .75rem;
	color: #ff6b6b;
	pointer-events: none;
}

.form-actions {
	display: flex;
	gap: 16px;
	flex-wrap: nowrap;
	margin-top: 10px;
	align-items: stretch;
}

.form-actions .btn-upload {
	flex: 1 1 auto;
	min-width: 0;
}

.form-actions .btn-reset {
	flex: 0 0 auto;
}

.form-actions button {
	min-width: 120px;
}

@media (max-width: 520px) {
	.form-actions {
		flex-wrap: wrap;
	}

	.form-actions .btn-upload {
		flex: 1 1 100%;
	}

	.form-actions .btn-reset {
		flex: 1 1 100%;
	}
}

@media (max-width: 600px) {
	.upload-shell {
		gap: 20px;
		grid-template-columns: 1fr;
	}

	.form-card {
		padding: 20px 20px 26px;
	}

	.material-form {
		gap: 18px;
	}

	.optional-slot {
		min-height: 70px;
	}
}